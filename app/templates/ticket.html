<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Ticket de Almuerzo</title>
    <style>
        /* Usar una fuente monoespaciada para un look de ticket clásico y compacto */
        @import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap');
        
        /* Resetear márgenes y padding */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto Mono', monospace;
            /* Ancho estándar de 80mm, pero podrías reducirlo a 58mm si tu impresora es más pequeña */
            width: 80mm; 
            font-size: 9pt; /* Reducimos el tamaño de fuente base */
            color: #000;
        }
        .ticket-container {
            /* Eliminamos el padding extra para aprovechar todo el ancho */
            padding: 2mm 1mm; 
            text-align: center;
        }
        .header {
            font-size: 10pt; /* Ligeramente más grande */
            font-weight: 700; /* Bold */
            margin-bottom: 5px; /* Menos espacio inferior */
        }
        .info {
            text-align: left;
            margin-bottom: 5px; /* Menos espacio inferior */
        }
        /* Usar una tabla para alinear perfectamente los datos */
        .info-table {
            width: 100%;
            font-size: 8.5pt; /* Aún más pequeño para los datos */
        }
        .info-table td {
            padding: 1px 0; /* Espaciado vertical mínimo */
        }
        .info-table td.label {
            font-weight: 700; /* Bold para las etiquetas */
            width: 30%; /* Ancho fijo para las etiquetas */
        }
        .qr-code {
            margin-top: 5px; /* Menos espacio superior */
        }
        .qr-code img {
            /* El tamaño del QR ahora lo controla principalmente 'box_size' en el backend */
            /* pero podemos darle un ancho máximo por si acaso */
            max-width: 60%; 
            height: auto;
            display: block;
            margin: 0 auto;
        }
        hr {
            border: 0;
            border-top: 1px dashed black;
            margin: 4px 0; /* Menos espaciado vertical */
        }
        /* Media query para la impresión */
        @media print {
            body {
                margin: 0;
            }
        }
    </style>
</head>
<body onload="window.print(); setTimeout(function() { window.close(); }, 500);">
    <div class="ticket-container">
        <div class="header">
            {{ nombre_colegio }}<br>
            TICKET DE ALMUERZO
        </div>
        <hr>
        <div class="info">
            <!-- Usamos una tabla para un diseño más compacto y alineado -->
            <table class="info-table">
                <tr>
                    <td class="label">ID:</td>
                    <td>{{ persona.id_persona }}</td>
                </tr>
                <tr>
                    <td class="label">Nombre:</td>
                    <td>{{ persona.nombre_persona }}</td>
                </tr>
                <tr>
                    <td class="label">Dpto:</td>
                    <td>{{ persona.dpto_ref.nombre_dpto }}</td>
                </tr>
                <tr>
                    <td class="label">Control:</td>
                    <td>{{ registro.tipo_control_ref.nombre_control }}</td>
                </tr>
                 <tr>
                    <td class="label">Fecha:</td>
                    <td>{{ fecha_hora }}</td>
                </tr>
            </table>
        </div>
        <div class="qr-code">
            <img src="{{ qr_code }}" alt="Código QR">
        </div>
    </div>
</body>
</html>